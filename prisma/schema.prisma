generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Student {
  id             Int      @id @default(autoincrement())  
  studentId      String   @unique                     
  firstName      String
  lastName       String
  address        String
  dob            DateTime
  degreeProgramId Int  
  degreeProgram  DegreeProgram @relation(fields: [degreeProgramId], references: [id])
  enrolledCourses Course[] @relation(name: "StudentCourses") // ðŸ”¥ Fixed many-to-many relation
}

model DegreeProgram {
  id          Int      @id @default(autoincrement())
  name        String   @unique 
  description String?
  students    Student[]
  courses     Course[]
}

model Course {
  id              Int      @id @default(autoincrement())
  courseName      String
  credits         Int
  degreeProgramId Int
  degreeProgram   DegreeProgram @relation(fields: [degreeProgramId], references: [id])
  students        Student[] @relation(name: "StudentCourses") // ðŸ”¥ Fixed many-to-many relation
}

model Administrator {
  id       String @id @default(uuid())
  name     String  // âœ… Added admin name
  email    String  @unique // âœ… Added email for notifications
  username String @unique
  password String
}

model AuditLog {
  id        String   @id @default(uuid())
  adminId   String
  action    String
  timestamp DateTime @default(now())
}
